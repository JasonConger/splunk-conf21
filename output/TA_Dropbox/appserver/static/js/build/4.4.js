webpackJsonp([4,6],{"views/shared/singlevalue/Master":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),e,i("views/shared/viz/Base"),i("views/shared/singlevalue/Sparkline"),i("views/shared/singlevalue/MainBody"),i("views/shared/singlevalue/UnderLabel"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("uri/route"),i("util/drilldown"),i("util/time"),i("util/color_utils"),i("js_charting/util/parsing_utils"),i("util/general_utils"),i("util/moment/relative"),i("util/numeral")],a=function(e,t,i,n,a,s,l,r,o,h,u,d,c,p,g,f,m,v){return n.extend({moduleId:i.id,className:"single-value",SEVERITY_COLORS:{severe:"#d93f3c",high:"#f58f39",elevated:"#f7bc38",guarded:"#6db7c6",low:"#65a637",none:"#555555"},SEVERITIES:["none","low","guarded","elevated","high","severe"],BLOCK_DEFAULT_FONT_COLOR:"#FFFFFF",DEFAULT_FONT_COLOR:"#333333",UNDERLABEL_COLOR:"#555555",NEUTRAL_CHANGE_COLOR:"#555555",DELTA_GREEN:"#65a637",DELTA_RED:"#d93f3c",EDGE_PADDING:32,NEUTRAL_SPARKLINE_COLOR:"#999999",MAX_RESULT_COUNT:1e3,initialize:function(t){n.prototype.initialize.apply(this,arguments),this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"100%"),this.$el.css("position","relative"),this.model.results=new r({searchResultsColumn:this.model.searchData,resultField:"",resultFieldValue:""}),this.model.presentation=new r,this.updateContainerDimensions(),this.originalHeight=this.$el.height(),this.model.presentation.set({fontColor:this.getFontColor(),scaleRatio:1,edgePadding:this.EDGE_PADDING}),this.$inlineMessage=e('<div class="inline-message"></div>').css({"text-align":"center",height:"32px",width:"100%",position:"absolute",bottom:"0"}).addClass(this.options.messageContainerClass||"")},onConfigChange:function(e){var i=t(e).chain().keys().any(function(e){return 0===e.indexOf("display.visualizations.singlevalue.")}).value();i&&this.invalidate("formatDataPass")},updateResultState:function(){var e,t,i,n=this.determineResultFieldName(this.model.config.get("display.visualizations.singlevalue.field")),a=this.getFieldValue(n);this.model.results.set("resultField",n),this.model.results.set("resultFieldValue",a),this.isTimeSeries()&&!isNaN(a)?(e=this.getFieldValues(n),this.model.results.set("sparkline",e),this.setDeltaValue(a),this.model.config.set("is_timeseries",!0,{transient:!0})):(this.model.results.unset("sparkline"),this.model.results.unset("deltaValue"),this.model.results.unset("deltaBacktrack"),this.model.config.set("is_timeseries",!1,{transient:!0})),this.severityColor=this.getSeverityColor(a),this.deltaColor=this.getDeltaColor(a),i=this.getDeltaIndicatorColor(),t=this.useColors()&&"trend"===this.model.config.get("display.visualizations.singlevalue.colorBy")||this.hasBackground()?i:this.NEUTRAL_SPARKLINE_COLOR,this.model.presentation.set("deltaColor",i),this.model.presentation.set("sparklineColor",t),this.model.presentation.set("fontColor",this.getFontColor()),this.model.presentation.set("formatPattern",this.getFormatPattern())},getDeltaColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.trendColorInterpretation")||"standard",t=this.model.results.get("deltaValue"),i="percentageIncrease"===t||t>0;return 0===t?this.NEUTRAL_CHANGE_COLOR:"inverse"===e?i?this.DELTA_RED:this.DELTA_GREEN:i?this.DELTA_GREEN:this.DELTA_RED},getSeverityColor:function(e){var t,i,n,a,s=this.model.config.get("display.visualizations.singlevalue.rangeValues"),l=this.model.config.get("display.visualizations.singlevalue.rangeColors"),r=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useColors"))||!1,h=this.getResultField("range");if(h&&!r)return this.SEVERITY_COLORS[h]||this.DEFAULT_FONT_COLOR;if(s){if(t=g.stringToArray(s),i=g.stringToArray(l),n=i.length>0,0===t.length||isNaN(e))return this.DEFAULT_FONT_COLOR;a=this.SEVERITIES.slice(1,6);for(var u=0;u<t.length;u++){if(isNaN(t[u]))return this.DEFAULT_FONT_COLOR;if(parseFloat(e)<=parseFloat(t[u]))return n?p.replaceSymbols(i[u],"#")||this.DEFAULT_FONT_COLOR:this.SEVERITY_COLORS[a[u]]}return n?p.replaceSymbols(i[t.length],"#")||this.DEFAULT_FONT_COLOR:this.SEVERITY_COLORS[a[a.length-1]]}return this.DEFAULT_FONT_COLOR},getDeltaIndicatorColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:"value"!==e&&this.useColors()?this.deltaColor:this.DEFAULT_FONT_COLOR},getFontColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:"trend"===e&&this.isTimeSeries()||!this.useColors()?this.DEFAULT_FONT_COLOR:this.severityColor},useColors:function(){var e=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useColors"))||!1,t=this.getFieldValues("range");return!(!t||e)||e},hasBackground:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorMode");return"block"===e&&this.useColors()&&this.getBackgroundColor()},getBackgroundColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.useColors()?"trend"===e?this.deltaColor:this.severityColor:this.DEFAULT_FONT_COLOR},getFormatPattern:function(){var e,t,i="0",n=this.model.config.get("display.visualizations.singlevalue.numberPrecision"),a=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useThousandSeparators"));return a!==!1&&(i+=",0"),n&&(e=n.match(/^0\.?(0*)$/),e&&2===e.length&&(t=e[1],t.length>4&&(t="0000"),t.length>0&&(i=i+"."+t))),i},setDeltaValue:function(e){var i,n,a,s,l,r,o,h,u,d,p,g,f,b=this.model.config.get("display.visualizations.singlevalue.trendInterval"),y=this.model.config.get("display.visualizations.singlevalue.trendDisplayMode"),L=this.getFieldValues("_time"),w=this.model.results.get("resultField"),x=this.getFormatPattern(),_=function(e){return c.bdTimeToDateObject(c.extractBdTime(L[L.length-e]))};if(b&&"auto"!==b){try{i=m.parseRelativeTimeExpression(b)}catch(e){return}if(i&&i[0]&&(n=i[0]),L.length>=2&&n&&n.unit&&!isNaN(n.amount)){if(f=c.normalizeUnit(n.unit),g=Math.abs(n.amount),h=_(1),d=_(1),u=_(2),p=(h.getTime()-u.getTime())/1e3,t.indexOf(["s","m","h"],f)!==-1)r=c.convertAmountAndUnitToSeconds(g,f);else{switch(f){case"y":d.setFullYear(d.getFullYear()-g);break;case"q":d.setMonth(d.getMonth()-3*g);break;case"mon":d.setMonth(d.getMonth()-g);break;case"w":d.setDate(d.getDate()-7*g);break;case"d":d.setDate(d.getDate()-g);break;default:return d=void 0}d&&(r=(h.getTime()-d)/1e3)}r&&(o=Math.round(r/p),o<L.length&&(a=this.calculateDeltaValue(w,o,y,e),s=o))}}a||0===a||(a=this.calculateDeltaValue(w,1,y,e),s=1),x&&!isNaN(a)&&(l=v(a).format(x),this.model.results.set("formattedDeltaValue",l)),this.model.results.set("deltaValue",a),this.model.results.set("deltaBacktrack",s)},calculateDeltaValue:function(e,t,i,n){var a=this.getFieldValue(e,t);return i&&"percent"===i.toLowerCase()?"0"===a?"0"===n?0:n>a?"percentageIncrease":"percentageDecrease":(n-a)/a*100:n-a},onAddedToDocument:function(){n.prototype.onAddedToDocument.apply(this,arguments),this.validateReflow(!0)},reflow:function(){this.updateContainerDimensions(),this.updateBackgroundDimensions(),this.invokeOnChildren("validateReflow",!0)},updateContainerDimensions:function(){var e,t=this.getSvgContainer();this.model.config.get("exportMode")?(this.svgWidth=this.options.width,this.svgHeight=this.options.height):(this.svgHeight=this.$el.height(),this.svgWidth=this.$el.width()),1==this.$el.find(this.$inlineMessage).length&&(this.svgHeight=this.svgHeight-this.$inlineMessage.height()),f.valuesAreNumericAndFinite([this.svgHeight,this.svgWidth])&&(t.height(this.svgHeight).width(this.svgWidth),e=this.svgHeight/this.originalHeight,f.valuesAreNumericAndFinite([e])&&0!==e||(e=1),this.model.presentation.set({svgWidth:this.svgWidth,svgHeight:this.svgHeight,scaleRatio:e}))},getResultField:function(e){var i=this.getFieldValue(this.determineResultFieldName(e));return i?i:t("N/A").t()},getFieldNames:function(){var i=this.model.searchData.get("fields");return i&&0!==i.length?t.isObject(i[0])?t(i).pluck("name"):e.extend([],i):[]},getFieldValue:function(e,t){var i=this.getFieldValues(e);return t||(t=0),i&&i.length?this.isTimeSeries()?i[i.length-t-1]:i[t]:""},getFieldValues:function(e){var i=this.getFieldNames(),n=this.model.searchData.get("columns")||[],a=t(i).indexOf(e);return n[a]},determineResultFieldName:function(e){var i=this.getFieldNames();return e&&t(i).contains(e)?e:t(i).find(function(e){return"_raw"===e||"_"!==e[0]})},isTimeSeries:function(){var e=this.getFieldNames();return t(e).some(function(e){return"_time"===e})},getSvgContainer:function(){return this.$(".svg-container")},getBackgroundMode:function(){return this.model.config.get("display.visualizations.singlevalue.colorMode")||"none"},updateBackgroundDimensions:function(){var e;this.hasBackground()&&(e=this.getSvgContainer().find(".block-background"),e.length>0&&(e.attr("width",this.svgWidth),e.attr("height",this.svgHeight)))},drawSeverityBackground:function(e){this.hasBackground()&&e.append(h.createElement("rect").attr({x:0,y:0,width:this.svgWidth,height:this.svgHeight,class:"block-background",fill:this.getBackgroundColor()}))},drawSvgContainer:function(){var e=this.getSvgContainer();return e.length>0&&e.remove(),e=h.createElement("svg").width(this.svgWidth).height(this.svgHeight).attr("class","svg-container").css("position","absolute").css("top","0").css("left","0"),e.appendTo(this.el),e},drawSparkline:function(e){this.children.sparkline&&(this.children.sparkline.detach(),this.children.sparkline.remove()),this.hasSparkline?(this.model.results.set({sparklineData:this.model.results.get("sparkline").slice(0)}),this.model.presentation.set({sparklineOpacity:1}),this.children.sparkline=new a({model:{presentation:this.model.presentation,results:this.model.results,state:this.model.config}}),this.children.sparkline.render().appendTo(e)):this.model.results.unset("sparklineData")},drawMainBody:function(e){var t,i,n,a,l,r=this.model.config.get("display.visualizations.singlevalue.underLabel");this.children.mainBody&&(this.children.mainBody.detach(),this.children.mainBody.remove()),this.hasSparkline&&r?(a=50,l=28,t=50,i=20,n=.85):(a=66,l=37,i=26,n=1.1,t=this.hasSparkline||r?60:70),this.model.presentation.set({singleValueFontSize:a,sideLabelFontSize:l,mainBodyPadding:t,deltaFontSize:i,deltaScale:n}),this.children.mainBody=new s({model:{application:this.model.application,state:this.model.config,results:this.model.results,presentation:this.model.presentation}}),this.listenTo(this.children.mainBody,"singleDrilldownClicked",function(e){this.handleSingleDrilldownClicked(e)}),this.listenTo(this.children.mainBody,"anchorTagClicked",function(e){this.handleAnchorTagClicked(e)}),this.children.mainBody.render().appendTo(e)},handleSingleDrilldownClicked:function(e){this.trigger(e.specificEventNames,e.drilldownInfo)},handleAnchorTagClicked:function(t){var i=e(t.currentTarget).attr("href");i&&u.redirectTo(i,d.shouldDrilldownInNewTab(t))},drawUnderLabel:function(e){var t,i=this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:this.UNDERLABEL_COLOR,n=this.hasBackground()?.8:1;t=this.hasSparkline?72:85,this.children.underLabel&&(this.children.underLabel.detach(),this.children.underLabel.remove()),this.model.presentation.set({underLabelY:t,underLabelColor:i,underLabelOpacity:n}),this.children.underLabel=new l({model:{state:this.model.config,results:this.model.results,presentation:this.model.presentation,application:this.model.application}}),this.listenTo(this.children.underLabel,"singleDrilldownClicked",function(e){this.handleSingleDrilldownClicked(e)}),this.listenTo(this.children.underLabel,"anchorTagClicked",function(e){this.handleAnchorTagClicked(e)}),this.children.underLabel.render().appendTo(e)},drawComponents:function(){var e=this.drawSvgContainer();this.hasSparkline=this.model.results.get("sparkline")&&o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.showSparkline"))!==!1,this.model.presentation.set("hasSparkline",this.hasSparkline),this.drawSeverityBackground(e),this.drawMainBody(e),this.model.config.get("display.visualizations.singlevalue.underLabel")&&this.drawUnderLabel(e),this.drawSparkline(e)},renderMaxResultCountMessage:function(e){var i=o.sprintf(t("These results may be truncated. This visualization is configured to display a maximum of %s results per series, and that limit has been reached.").t(),e);this.$inlineMessage.html(t(this.inlineMessageTemplate).template({message:i,level:"warning"}))},inlineMessageTemplate:'\t                <div class="alert alert-inline alert-<%= level %> alert-inline"> \t                    <i class="icon-alert"></i> \t                    <%- message %> \t                </div> \t            ',updateView:function(){this.updateResultState(),this.$el.removeClass(this._dynamicClasses||""),this._dynamicClasses=[this.model.config.get("display.visualizations.singlevalue.additionalClass"),this.getFieldValue(this.model.config.get("display.visualizations.singlevalue.classField"))].join(" "),this.$el.addClass(this._dynamicClasses),this.drawComponents(),this.$inlineMessage.remove(),this.model.searchDataParams&&(this.MAX_RESULT_COUNT=this.model.searchDataParams.get("count")),this.model.results.get("sparkline")&&this.model.results.get("sparkline").length>=this.MAX_RESULT_COUNT&&(this.renderMaxResultCountMessage(this.MAX_RESULT_COUNT),this.$inlineMessage.insertAfter(this.$(".svg-container"))),this.isAddedToDocument()&&this.reflow()}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/Sparkline":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,n,a,s,l,r){return n.extend({moduleId:i.id,className:"single-value-sparkline",el:function(){return s.createElement("g").attr("class","single-value-sparkline")},SPARKLINE_WIDTH:150,SPARKLINE_HEIGHT:14,SPARKLINE_Y:77,DEFAULT_SPARKLINE_COLOR:"#000000",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.sparklineColor=this.model.presentation.get("sparklineColor"),this.activate()},drawSparkline:function(){var e=this.model.presentation.get("sparklineOpacity")||1,i=1,n=this.model.results.get("sparklineData"),a=this.model.results.get("deltaBacktrack");if(this.$el.empty(),n&&!(n.length<2)){var l=[],r=1/0,o=-(1/0),h=1/0,u=-(1/0);t.each(n,function(e){var t=i++,n=parseFloat(e)||0;r=Math.min(t,r),o=Math.max(t,o),h=Math.min(n,h),u=Math.max(n,u),l.push({x:t,y:n})});var d=this.SPARKLINE_WIDTH,c=this.SPARKLINE_HEIGHT;if(t.each(l,function(e,t){e.x=d*((e.x-r)/Math.max(o-r,1)),e.y=c*(1-(e.y-h)/Math.max(u-h,1))}),a>0&&this.displayDeltaRange()){var p=l.length-1,g=Math.max(p-a,0);s.createElement("path").attr("class","sparkline").attr("d",this.pointsToPath(l.slice(0,g+1))).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",.6*e).attr("stroke-width","1px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el),s.createElement("path").attr("class","sparkline-delta").attr("d",this.pointsToPath(l.slice(g,p+1))).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",e).attr("stroke-width","1.5px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el);var f=l[g];s.createElement("circle").attr("class","sparkline-point").attr("cx",f.x).attr("cy",f.y).attr("r",2).attr("fill",this.sparklineColor).attr("stroke","none").attr("opacity",e).appendTo(this.$el)}else s.createElement("path").attr("class","sparkline").attr("d",this.pointsToPath(l)).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",e).attr("stroke-width","1.5px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el);var m=l[l.length-1];s.createElement("circle").attr("class","sparkline-point").attr("cx",m.x).attr("cy",m.y).attr("r",2).attr("fill",this.sparklineColor).attr("stroke","none").attr("opacity",e).appendTo(this.$el)}},positionAndScaleSparkline:function(){var e,t,i,n,a,s=r.roundToDecimal((this.svgWidth/2-this.sparklineWidth/2)/this.scaleRatio,-2),o=this.SPARKLINE_Y,h=this.model.presentation.get("edgePadding"),u=this.svgWidth-2*h;this.sparklineWidth<u?l.valuesAreNumericAndFinite([this.scaleRatio,s,o])&&this.$el.attr({transform:"scale("+this.scaleRatio+")translate("+s+","+o+")"}):(i=r.roundToDecimal(u/this.SPARKLINE_WIDTH,-2),n=r.roundToDecimal(h/i,-2),e=r.roundToDecimal(this.svgHeight/this.scaleRatio,-2),t=e*i,a=r.roundToDecimal(o+(this.svgHeight-t)/i,-2),l.valuesAreNumericAndFinite([i,n,a])&&this.$el.attr({transform:"scale("+i+")translate("+n+","+a+")"}))},pointsToPath:function(e){for(var t,i="",n=0,a=e.length;n<a;n++)t=e[n],i+=0===n?"M":"L",i+=t.x+","+t.y;return i},displayDeltaRange:function(){var e=a.normalizeBoolean(this.model.state.get("display.visualizations.singlevalue.showTrendIndicator")),t=this.model.results.get("deltaValue");return e!==!1&&null!=t},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleSparkline()},updateContainerDimensions:function(){this.svgWidth=this.model.presentation.get("svgWidth"),this.svgHeight=this.model.presentation.get("svgHeight"),this.scaleRatio=this.model.presentation.get("scaleRatio"),this.sparklineWidth=this.SPARKLINE_WIDTH*this.scaleRatio},render:function(){return this.drawSparkline(),this}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/MainBody":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Labels"),i("views/shared/singlevalue/Delta"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,n,a,s,l,r,o,h,u){return n.extend({moduleId:i.id,className:"single-value-main-body",el:function(){return o.createElement("g").attr("class","single-value-main-body")},DELTA_PADDING:10,initialize:function(e){n.prototype.initialize.apply(this,arguments),this.model.presentation.set("deltaPadding",this.DELTA_PADDING)},reflow:function(){var e,t,i,n,a,s,l,r,o=this.model.presentation.get("edgePadding"),d=this.model.presentation.get("svgWidth")-2*o,c=this.model.presentation.get("scaleRatio"),p=this.model.presentation.get("mainBodyPadding"),g=p*c;h.valuesAreNumericAndFinite([g])&&this.$el.attr("transform","translate(0,"+g+")"),this.displayDelta()?(d-=this.DELTA_PADDING,this.maxLabelProportion||(i=this.children.labels.getMainLabelsWidth(),t=this.children.delta.el.getBBox().width,this.maxLabelProportion=u.roundToDecimal(i/(i+t),-2)),a=u.roundToDecimal(d*this.maxLabelProportion,-2),n=d-a,this.model.presentation.set("maxLabelsWidth",a),this.model.presentation.set("maxDeltaWidth",n)):(this.model.presentation.set("maxLabelsWidth",d),this.model.presentation.set("maxDeltaWidth",0)),this.children.labels.validateReflow(!0),this.displayDelta()?(this.children.delta.validateReflow(!0),t=this.children.delta.el.getBoundingClientRect().width,this.model.presentation.set("deltaWidth",t)):this.model.presentation.set("deltaWidth",0),this.children.labels.positionLabels(),this.displayDelta()&&(s=this.hasAfterLabel?this.children.labels.children.afterLabelView:this.children.labels.children.singleResultView,r=parseFloat(s.$("text").attr("x")),l=s.getWidth(),e=r+l,this.model.presentation.set("deltaLeft",e),this.children.delta.positionAndScaleElements())},drawLabels:function(){this.children.labels&&this.children.labels.remove();var e=this.model.state.get("display.visualizations.singlevalue.unit");if("undefined"==typeof e||""===e)this.hasUnit=!1,this.hasAfterLabel=!!this.model.state.get("display.visualizations.singlevalue.afterLabel"),this.hasBeforeLabel=!!this.model.state.get("display.visualizations.singlevalue.beforeLabel");else{this.hasUnit=!0;var t=this.model.state.get("display.visualizations.singlevalue.unitPosition");"before"===t?(this.unitPosition="before",this.hasBeforeLabel=!1,this.hasAfterLabel=!1):(this.unitPosition="after",this.hasBeforeLabel=!1,this.hasAfterLabel=!1)}this.children.labels=new a({model:{application:this.model.application,state:this.model.state,results:this.model.results,presentation:this.model.presentation},unit:e,unitPosition:this.unitPosition,hasUnit:this.hasUnit,hasBeforeLabel:this.hasBeforeLabel,hasAfterLabel:this.hasAfterLabel}),this.listenTo(this.children.labels,"singleDrilldownClicked",function(e){this.trigger("singleDrilldownClicked",e)}),this.listenTo(this.children.labels,"anchorTagClicked",function(e){this.trigger("anchorTagClicked",e)}),this.children.labels.render().appendTo(this.$el)},drawDelta:function(){this.children.delta&&(this.children.delta.detach(),this.children.delta.remove()),this.displayDelta()&&(this.children.delta=new s({model:{state:this.model.state,presentation:this.model.presentation,results:this.model.results}}),this.children.delta.render().appendTo(this.$el))},displayDelta:function(){var e=r.normalizeBoolean(this.model.state.get("display.visualizations.singlevalue.showTrendIndicator")),t=this.model.results.get("deltaValue");return e!==!1&&(t||0===t)},drawComponents:function(){this.drawLabels(),this.drawDelta()},render:function(){return this.drawComponents(),this}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/Labels":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Label"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/math_utils")],a=function(e,t,i,n,a,s,l,r,o){return n.extend({moduleId:i.id,className:"single-value-labels",el:function(){return r.createElement("g").attr("class","single-value-labels")},LABEL_SIDE_PADDING:5,initialize:function(e){n.prototype.initialize.apply(this,arguments),this.activate(),this.unit=e.unit,this.unitPosition=e.unitPosition,this.hasUnit=e.hasUnit,this.hasAfterLabel=e.hasAfterLabel,this.hasBeforeLabel=e.hasBeforeLabel,this.originalSingleValueFontSize=this.model.presentation.get("singleValueFontSize"),this.originalSideLabelFontSize=this.model.presentation.get("sideLabelFontSize"),this.updateContainerDimensions()},reflow:function(){this.updateContainerDimensions(),this.scaleLabels()},updateContainerDimensions:function(){this.scaleRatio=this.model.presentation.get("scaleRatio"),this.singleValueFontSize=this.originalSingleValueFontSize*this.scaleRatio,this.labelFontSize=this.originalSideLabelFontSize*this.scaleRatio},constructMainLabelData:function(){var e,t=this.model.presentation.get("fontColor"),i="display.visualizations.singlevalue.beforeLabel",n="display.visualizations.singlevalue.afterLabel";return e={singleResultData:{labelFontSize:this.originalSingleValueFontSize,labelFontColor:t,labelGroupClass:"single-result-group",labelClass:"single-result",linkField:"result",configName:"display.visualizations.singlevalue.singleResult",useResultField:!0,fontWeight:"bold",unit:this.unit,unitPosition:this.unitPosition,hasUnit:this.hasUnit,exportMode:!!this.model.state.get("exportMode")}},this.hasBeforeLabel&&(e.beforeLabelData={labelFontSize:this.originalSideLabelFontSize,labelFontColor:t,labelGroupClass:"before-label-group",labelClass:"before-label",linkField:"beforelabel",configName:i,useResultField:!1,fontWeight:"normal"}),this.hasAfterLabel&&(e.afterLabelData={labelFontSize:this.originalSideLabelFontSize,labelFontColor:t,labelGroupClass:"after-label-group",labelClass:"after-label",linkField:"afterlabel",configName:n,useResultField:!1,fontWeight:"normal"}),e},getMainLabelsWidth:function(){var e=0;return this.hasBeforeLabel&&(e+=this.children.beforeLabelView.getWidth(),e+=this.LABEL_SIDE_PADDING),this.hasAfterLabel&&(e+=this.children.afterLabelView.getWidth(),e+=this.LABEL_SIDE_PADDING),e+=this.children.singleResultView.getWidth()},positionLabels:function(){var e,t,i,n=0,a=this.children.singleResultView.getLabelElement(),s=n,l=n,r=0,h=this.children.singleResultView.getWidth(),u=this.getMainLabelsWidth(),d=this.model.presentation.get("deltaWidth")||0,c=this.model.presentation.get("svgWidth");d>0&&(d+=this.model.presentation.get("deltaPadding")),n=o.roundToDecimal(c/2-(u+d)/2,-2),this.hasBeforeLabel?(i=this.children.beforeLabelView.getWidth(),e=this.children.beforeLabelView.getLabelElement(),s=n,l=i+s+this.LABEL_SIDE_PADDING,e.attr("x",s)):l=n,a.attr("x",l),this.hasAfterLabel&&(t=this.children.afterLabelView.getLabelElement(),r=l+h+this.LABEL_SIDE_PADDING,t.attr("x",r))},scaleLabels:function(){var e,t,i,n,a=this.children.singleResultView.getLabelElement(),s=this.model.presentation.get("maxLabelsWidth");this.defaultMainLabelsWidth||(this.defaultMainLabelsWidth=this.getMainLabelsWidth()),a.css("font-size",this.singleValueFontSize),(this.model.state.get("exportMode")||0!==this.children.singleResultView.getWidth())&&(this.hasBeforeLabel&&(e=this.children.beforeLabelView.getLabelElement(),e.css("font-size",this.labelFontSize)),this.hasAfterLabel&&(t=this.children.afterLabelView.getLabelElement(),t.css("font-size",this.labelFontSize)),i=this.getMainLabelsWidth(),i>s&&(n=o.roundToDecimal(s/this.defaultMainLabelsWidth,-4),this.singleValueFontSize=o.roundToDecimal(this.originalSingleValueFontSize*n,-4),this.labelFontSize=o.roundToDecimal(this.originalSideLabelFontSize*n,-4),a.css("font-size",this.singleValueFontSize),this.hasBeforeLabel&&(e=this.children.beforeLabelView.getLabelElement(),e.css("font-size",this.labelFontSize)),this.hasAfterLabel&&(t=this.children.afterLabelView.getLabelElement(),t.css("font-size",this.labelFontSize))))},createLabel:function(e,i,n,s,l){this.children[s]&&(this.children[s].detach(),this.children[s].remove()),this.children[s]=new a(t.extend(n,i[l])),this.children[s].render().appendTo(e),this.listenTo(this.children[s],"singleDrilldownClicked",function(e){this.trigger("singleDrilldownClicked",e)}),this.listenTo(this.children[s],"anchorTagClicked",function(e){this.trigger("anchorTagClicked",e)})},render:function(){var e=this.$el.find(".main-label-group"),t=this.constructMainLabelData(),i={model:{state:this.model.state,results:this.model.results,presentation:this.model.presentation,application:this.model.application}};return e.length>0&&e.remove(),e=r.createElement("g").attr("class","main-label-group"),this.$el.append(e),this.hasBeforeLabel&&this.createLabel(e,t,i,"beforeLabelView","beforeLabelData"),this.createLabel(e,t,i,"singleResultView","singleResultData"),this.hasAfterLabel&&this.createLabel(e,t,i,"afterLabelView","afterLabelData"),this}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/Label":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("uri/route"),i("util/numeral")],a=function(e,t,i,n,a,s,l,r,o,h){var u=function(e,i){if(t.isFunction(e))try{e=e(i)}catch(e){return""}return e};return n.extend({moduleId:i.id,className:"single-value-label",el:function(){return l.createElement("g").attr({class:"single-value-label","data-name":this.options.configName})},initialize:function(e){if(n.prototype.initialize.apply(this,arguments),this.activate(),this.LABEL_FONT_SIZE=this.options.labelFontSize,this.labelFontColor=this.options.labelFontColor,this.labelGroupClass=this.options.labelGroupClass,this.labelClass=this.options.labelClass,this.linkField=this.options.linkField,this.resultFieldValue=this.model.results.get("resultFieldValue"),this.configName=this.options.configName,this.unit=this.options.unit,this.unitPosition=this.options.unitPosition,this.hasUnit=this.options.hasUnit,this.isNumericLabelValue=!1,this.options.useResultField)if(isNaN(this.resultFieldValue))this.labelValue=this.resultFieldValue;else{var t=this.model.presentation.get("formatPattern");this.labelValue=h(this.resultFieldValue).format(t),this.isNumericLabelValue=!0}else this.labelValue=u(this.model.state.get(this.configName)||"",this.resultFieldValue);this.fontWeight=this.options.fontWeight,this.labelOpacity=this.options.labelOpacity,this.exportMode=this.options.exportMode},events:{"click a.single-drilldown":function(i){i.preventDefault();var n=e(i.currentTarget),a=this.model.results.get("searchResultsColumn"),l=a.get("fields");t.isObject(l[0])&&(l=t(l).pluck("name"));var r=t.object(t(l).map(function(e){return"row."+e}),t(a.get("columns")).map(function(e){return t(e).last()})),o={name:n.data("field"),value:n.data("value"),rowContext:r,originalEvent:i,type:"cell"};if(this.model.results.has("sparklineData")){var h=t(l).indexOf("_time"),u=t(l).indexOf("_span"),d=a.get("columns"),c=s.getEpochTimeFromISO(t(d[h]).last()),p=parseFloat(t(d[u]).last());o.name2=o.name,o.value2=o.value,o.name="_time",o.value=c,o._span=p,o.rowContext["row._time"]=c,o.rowContext["row._span"]=p}var g=t(n.children("text").attr("class").split(" ")).map(function(e){return"click:"+e}).join(" ");this.trigger("singleDrilldownClicked",{specificEventNames:"click drilldown "+g,drilldownInfo:o})},"click a.link-drilldown":function(e){e.preventDefault(),this.trigger("anchorTagClicked",e)}},constructLabelData:function(){var e;this.model.presentation.get("severityColor");return e={name:this.labelClass,linkField:this.linkField,value:this.labelValue,fontSize:this.LABEL_FONT_SIZE+"px",fontWeight:this.fontWeight,fontColor:this.labelFontColor,opacity:this.labelOpacity||1}},drawLabel:function(e,t){var i,n,a;i=l.createElement("g").attr("class","svg-label"),n=l.createElement("text").attr({x:t.x,y:t.y,class:t.name}).css({"letter-spacing":this.isNumericLabelValue?"-0.02em":"normal","font-size":t.fontSize,"font-weight":t.fontWeight,fill:t.fontColor,opacity:t.opacity});var s=""+t.value;if(this.hasUnit&&"before"===this.unitPosition)if(/^\-\d/.test(s)&&(n.append(document.createTextNode("-")),s=s.substring(1)),this.exportMode)s=""+this.unit+s;else{var r=l.createElement("tspan").attr({class:t.name+"-unit"}).css({"letter-spacing":"normal"}).text(""+this.unit);n.append(r)}if(n.append(document.createTextNode(s)),this.hasUnit&&"after"===this.unitPosition)if(this.exportMode)n.append(document.createTextNode(" "+this.unit));else{var o=l.createElement("tspan").attr({class:t.name+"-unit"}).css({"letter-spacing":"normal"}).text(" "+this.unit);n.append(o)}t.link?(a=l.createElement("a").attr({href:t.link.attr("href"),class:t.link.attr("class")}).css({"text-decoration":"none"}),a.data("value",t.value),a.data("field",t.linkField),a.append(n),i.append(a),n.hover(function(e){n.css({"text-decoration":"mouseenter"===e.type?"underline":"none"})})):i.append(n),e.append(i),this.labelElement=this.getLabelElement()},getWidth:function(){return this.getBBox(this.labelElement).width},getLeftX:function(e){return parseInt(e.attr("x"),10)},getBBox:function(e){var t;try{t=e[0].getBBox()}catch(e){t={x:0,y:0,width:0,height:0}}return t},getRightX:function(e){return this.getLeftX(e)+this.getWidth(e)},getClientRect:function(e){return e[0].getBoundingClientRect()},getLabelElement:function(){var e=this.$("."+this.labelClass);if(e.length>0)return e},wrapLinks:function(i,n){if(this.model.application){var a=this.model.state.get("display.visualizations.singlevalue.linkFields");a=a?e.trim(a).split(/\s*,\s*/):[];var l,r=this.model.state.get("display.visualizations.singlevalue.linkView"),h=this.model.state.get("display.visualizations.singlevalue.linkSearch"),u=this.model.state.get("display.visualizations.singlevalue.drilldown")||"none",d=this.model.application.toJSON();if("search"!==r&&a.length||h){var c;if(r){var p=h?{q:h}:void 0;c="/"===r.charAt(0)?s.make_full_url(r,p):o.page(d.root,d.locale,d.app,r,{data:p})}else c=o.search(d.root,d.locale,d.app,{data:{q:h}});l=e('<a class="link-drilldown" />').attr("href",c)}else"none"!==u&&(l=e('<a class="single-drilldown" href="#"></a>'),t(a).contains("result")||a.push("result"));return l?(l.data({field:i,value:n}),{linkFields:a,link:l}):void 0}},render:function(){var e,i=this.constructLabelData(),n=this.model.results.get("resultFieldValue"),a=this.wrapLinks(this.model.results.get("resultField"),n);return a&&t.each(a.linkFields,function(e){this.linkField===e&&(i.link=a.link)},this),e=this.$el.find("."+this.labelGroupClass),
e.length>0&&e.remove(),e=l.createElement("g").attr("class",this.labelGroupClass),this.$el.append(e),this.drawLabel(e,i),this}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"util/numeral":function(e,t,i){var n,a;n=[i("stubs/i18n"),i(242)],a=function(e,t){var i=e.numeral_install,n={de_DE:"de",en_DEBUG:"en-debug",en_GB:"en-gb",en_US:"en-us",it_IT:"it",ko_KR:"ko",zh_CN:"chs",zh_TW:"chs-traditional"};return"function"==typeof i&&(i(t),t.language(n[e.locale_name()])),t}.apply(t,n),!(void 0!==a&&(e.exports=a))},242:function(e,t,i){var n,a;n=[i(243)],a=function(e){return e}.apply(t,n),!(void 0!==a&&(e.exports=a))},243:function(e,t,i){var n,a;(function(){/*!
	 * numeral.js
	 * version : 1.5.3
	 * author : Adam Draper
	 * license : MIT
	 * http://adamwdraper.github.com/Numeral-js/
	 */
(function(){function i(e){this._value=e}function s(e,t,i,n){var a,s,l=Math.pow(10,t);return s=(i(e*l)/l).toFixed(t),n&&(a=new RegExp("0{1,"+n+"}$"),s=s.replace(a,"")),s}function l(e,t,i){var n;return n=t.indexOf("$")>-1?o(e,t,i):t.indexOf("%")>-1?h(e,t,i):t.indexOf(":")>-1?u(e,t):c(e._value,t,i)}function r(e,t){var i,n,a,s,l,r=t,o=["KB","MB","GB","TB","PB","EB","ZB","YB"],h=!1;if(t.indexOf(":")>-1)e._value=d(t);else if(t===L)e._value=0;else{for("."!==b[y].delimiters.decimal&&(t=t.replace(/\./g,"").replace(b[y].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+b[y].abbreviations.thousand+"(?:\\)|(\\"+b[y].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+b[y].abbreviations.million+"(?:\\)|(\\"+b[y].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+b[y].abbreviations.billion+"(?:\\)|(\\"+b[y].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+b[y].abbreviations.trillion+"(?:\\)|(\\"+b[y].currency.symbol+")?(?:\\))?)?$"),l=0;l<=o.length&&!(h=t.indexOf(o[l])>-1&&Math.pow(1024,l+1));l++);e._value=(h?h:1)*(r.match(i)?Math.pow(10,3):1)*(r.match(n)?Math.pow(10,6):1)*(r.match(a)?Math.pow(10,9):1)*(r.match(s)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=h?Math.ceil(e._value):e._value}return e._value}function o(e,t,i){var n,a,s=t.indexOf("$"),l=t.indexOf("("),r=t.indexOf("-"),o="";return t.indexOf(" $")>-1?(o=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(o=" ",t=t.replace("$ ","")):t=t.replace("$",""),a=c(e._value,t,i),s<=1?a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),n=1,(s<l||s<r)&&(n=0),a.splice(n,0,b[y].currency.symbol+o),a=a.join("")):a=b[y].currency.symbol+o+a:a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,o+b[y].currency.symbol),a=a.join("")):a=a+o+b[y].currency.symbol,a}function h(e,t,i){var n,a="",s=100*e._value;return t.indexOf(" %")>-1?(a=" ",t=t.replace(" %","")):t=t.replace("%",""),n=c(s,t,i),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,a+"%"),n=n.join("")):n=n+a+"%",n}function u(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*t*60)/60),n=Math.round(e._value-60*t*60-60*i);return t+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}function d(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*Number(t[0])*60,i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}function c(e,t,i){var n,a,l,r,o,h,u=!1,d=!1,c=!1,p="",g=!1,f=!1,m=!1,v=!1,w=!1,x="",_="",T=Math.abs(e),C=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],D="",k=!1;if(0===e&&null!==L)return L;if(t.indexOf("(")>-1?(u=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(d=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(g=t.indexOf("aK")>=0,f=t.indexOf("aM")>=0,m=t.indexOf("aB")>=0,v=t.indexOf("aT")>=0,w=g||f||m||v,t.indexOf(" a")>-1?(p=" ",t=t.replace(" a","")):t=t.replace("a",""),T>=Math.pow(10,12)&&!w||v?(p+=b[y].abbreviations.trillion,e/=Math.pow(10,12)):T<Math.pow(10,12)&&T>=Math.pow(10,9)&&!w||m?(p+=b[y].abbreviations.billion,e/=Math.pow(10,9)):T<Math.pow(10,9)&&T>=Math.pow(10,6)&&!w||f?(p+=b[y].abbreviations.million,e/=Math.pow(10,6)):(T<Math.pow(10,6)&&T>=Math.pow(10,3)&&!w||g)&&(p+=b[y].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(x=" ",t=t.replace(" b","")):t=t.replace("b",""),l=0;l<=C.length;l++)if(n=Math.pow(1024,l),a=Math.pow(1024,l+1),e>=n&&e<a){x+=C[l],n>0&&(e/=n);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(_=" ",t=t.replace(" o","")):t=t.replace("o",""),_+=b[y].ordinal(e)),t.indexOf("[.]")>-1&&(c=!0,t=t.replace("[.]",".")),r=e.toString().split(".")[0],o=t.split(".")[1],h=t.indexOf(","),o?(o.indexOf("[")>-1?(o=o.replace("]",""),o=o.split("["),D=s(e,o[0].length+o[1].length,i,o[1].length)):D=s(e,o.length,i),r=D.split(".")[0],D=D.split(".")[1].length?b[y].delimiters.decimal+D.split(".")[1]:"",c&&0===Number(D.slice(1))&&(D="")):r=s(e,null,i),r.indexOf("-")>-1&&(r=r.slice(1),k=!0),h>-1&&(r=r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+b[y].delimiters.thousands)),0===t.indexOf(".")&&(r=""),(u&&k?"(":"")+(!u&&k?"-":"")+(!k&&d?"+":"")+r+D+(_?_:"")+(p?p:"")+(x?x:"")+(u&&k?")":"")}function p(e,t){b[e]=t}function g(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function f(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var i=g(e),n=g(t);return i>n?i:n},-(1/0))}var m,v="1.5.3",b={},y="en",L=null,w="0,0",x="undefined"!=typeof e&&e.exports;m=function(e){return m.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=m.fn.unformat(e)),new i(Number(e))},m.version=v,m.isNumeral=function(e){return e instanceof i},m.language=function(e,t){if(!e)return y;if(e&&!t){if(!b[e])throw new Error("Unknown language : "+e);y=e}return!t&&b[e]||p(e,t),m},m.languageData=function(e){if(!e)return b[y];if(!b[e])throw new Error("Unknown language : "+e);return b[e]},m.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),m.zeroFormat=function(e){L="string"==typeof e?e:null},m.defaultFormat=function(e){w="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,n,a=this.length>>>0,s=!1;for(1<arguments.length&&(n=t,s=!0),i=0;a>i;++i)this.hasOwnProperty(i)&&(s?n=e(n,this[i],i,this):(n=this[i],s=!0));if(!s)throw new TypeError("Reduce of empty array with no initial value");return n}),m.fn=i.prototype={clone:function(){return m(this)},format:function(e,t){return l(this,e?e:w,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:r(this,e?e:w)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t,n,a){return e+i*t}var i=f.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/i,this},subtract:function(e){function t(e,t,n,a){return e-i*t}var i=f.call(null,this._value,e);return this._value=[e].reduce(t,this._value*i)/i,this},multiply:function(e){function t(e,t,i,n){var a=f(e,t);return e*a*(t*a)/(a*a)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t,i,n){var a=f(e,t);return e*a/(t*a)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(m(this._value).subtract(e).value())}},x&&(e.exports=m),"undefined"==typeof ender&&(this.numeral=m),n=[],a=function(){return m}.apply(t,n),!(void 0!==a&&(e.exports=a))}).call(this)}).call(window)},"views/shared/singlevalue/Delta":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,n,a,s,l){return n.extend({moduleId:i.id,className:"single-value-delta",el:function(){return a.createElement("g").attr("class","single-value-delta")},SVG_POINTS:{decrease:{polylinePoints:"20.5,3 20.5,20.5 3,20.5",linePoints:[20.2,20.9,3.4,4]},increase:{polylinePoints:"20.5,21 20.5,3.5 3,3.5",linePoints:[20.2,3.3,3.4,20.2]},noChange:{polylinePoints:"14.8,20.2 23.8,11.2 14.8,2.2",linePoints:[0,11.2,23,11.2]}},INDICATOR_WIDTH:22,initialize:function(e){n.prototype.initialize.apply(this,arguments),this.updateContainerDimensions(),this.activate()},drawComponents:function(){var e=this.model.state.get("display.visualizations.singlevalue.trendDisplayMode");this.deltaValue=this.model.results.get("deltaValue"),this.formattedDeltaValue=this.model.results.get("formattedDeltaValue"),this.deltaValue&&0!==this.deltaValue?"percentageDecrease"===this.deltaValue||this.deltaValue<0?(this.indicatorMode="decrease",this.indicatorClass="delta-down-indicator"):("percentageIncrease"===this.deltaValue||this.deltaValue>0)&&(this.indicatorMode="increase",this.indicatorClass="delta-up-indicator"):(this.indicatorMode="noChange",this.indicatorClass="delta-no-change-indicator"),this.indicatorColor=this.model.presentation.get("deltaColor"),isNaN(this.deltaValue)||this.deltaValue===1/0||this.deltaValue===-(1/0)?this.formattedDeltaValue="N/A":e&&"percent"===e.toLowerCase()&&(this.formattedDeltaValue+="%"),this.drawLabel(),this.drawIndicator()},drawIndicator:function(){var e=a.createElement("g").attr({class:"delta-indicator "+this.indicatorClass}),t=this.SVG_POINTS[this.indicatorMode],i=a.createElement("polyline").attr({points:t.polylinePoints,fill:"none",stroke:this.indicatorColor,"stroke-width":"5px"}),n=a.createElement("line").attr({x1:t.linePoints[0],y1:t.linePoints[1],x2:t.linePoints[2],y2:t.linePoints[3],fill:this.indicatorColor,stroke:this.indicatorColor,"stroke-width":"5px"});e.append(i),e.append(n),this.$el.append(e)},drawLabel:function(){var e=a.createElement("text").attr({class:"delta-label"}).text(this.formattedDeltaValue).css({"font-size":this.model.presentation.get("deltaFontSize"),fill:this.indicatorColor,fontWeight:"bold"});this.$el.append(e)},updateContainerDimensions:function(){this.scaleRatio=this.model.presentation.get("scaleRatio")},positionAndScaleElements:function(){var e,t,i,n,a,r=this.$el.find(".delta-label"),o=this.$el.find(".delta-indicator"),h=this.model.presentation.get("deltaScale"),u=this.INDICATOR_WIDTH*h,d=this.model.presentation.get("deltaLeft")||0,c=-45,p=this.model.presentation.get("maxDeltaWidth");this.defaultDeltaWidth||(this.defaultDeltaWidth=this.getDeltaWidth()),this.defaultLabelWidth||(this.defaultLabelWidth=r[0].getBBox().width),n=(d+10)/this.scaleRatio,e=this.defaultLabelWidth,i=l.roundToDecimal(e/2-u/2,-2),s.valuesAreNumericAndFinite([this.scaleRatio,i,c,n])&&(o.attr({transform:"scale("+h+")translate("+i+","+c+")"}),this.$el.attr({transform:"scale("+this.scaleRatio+")translate("+n+")"})),t=this.getDeltaWidth(),t>p&&(a=l.roundToDecimal(p/this.defaultDeltaWidth,-2),n=(d+10)/a,s.valuesAreNumericAndFinite([a,n])&&this.$el.attr({transform:"scale("+a+")translate("+n+")"}))},getDeltaWidth:function(){return this.el.getBoundingClientRect().width},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleElements()},render:function(){return this.drawComponents(),this}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/UnderLabel":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Label"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,n,a,s,l,r,o,h){return n.extend({moduleId:i.id,className:"single-value-under-label",initialize:function(e){n.prototype.initialize.apply(this,arguments)},el:function(){return r.createElement("g").attr("class","single-value-under-label")},LABEL_FONT_SIZE:12,createUnderLabel:function(){this.children.underLabel&&(this.children.underLabel.detach(),this.children.underLabel.remove()),this.children.underLabel=new a({model:{state:this.model.state,results:this.model.results,presentation:this.model.presentation,application:this.model.application},labelFontSize:this.LABEL_FONT_SIZE,labelFontColor:this.model.presentation.get("underLabelColor"),labelGroupClass:"under-label-group",labelClass:"under-label",linkField:"underlabel",configName:"display.visualizations.singlevalue.underLabel",useResultField:!1,labelOpacity:this.model.presentation.get("underLabelOpacity"),fontWeight:"normal"}),this.listenTo(this.children.underLabel,"singleDrilldownClicked",function(e){this.trigger("singleDrilldownClicked",e)}),this.listenTo(this.children.underLabel,"anchorTagClicked",function(e){this.trigger("anchorTagClicked",e)})},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleUnderLabel()},updateContainerDimensions:function(){this.svgWidth=this.model.presentation.get("svgWidth"),this.svgHeight=this.model.presentation.get("svgHeight"),this.scaleRatio=this.model.presentation.get("scaleRatio"),this.UNDER_LABEL_WIDTH=this.children.underLabel.getWidth()},positionAndScaleUnderLabel:function(){if(this.UNDER_LABEL_WIDTH){var e=h.roundToDecimal(this.svgWidth/2-this.UNDER_LABEL_WIDTH/2,-2),t=this.model.presentation.get("underLabelY")*this.scaleRatio;o.valuesAreNumericAndFinite([e,t])&&this.$el.attr({transform:"translate("+e+","+t+")"})}},render:function(){return this.createUnderLabel(),this.children.underLabel.render().appendTo(this.$el),this}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"util/drilldown":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("models/services/search/IntentionsParser"),i("shim/splunk.util"),i("util/console")],a=function(e,t,i,n,a){var s=function(e){var t=e.originalEvent||e;return!(!t.ctrlKey&&!t.metaKey)},l=function(e){var t=e.originalEvent||e;return!!t.altKey},r=function(e,i){var n=t(e.rowContext).omit("row._time"),a=t(n).chain().keys().map(function(e){return e.replace("row.","")}).value(),s=function(e){return i[e]&&i[e].hasOwnProperty("groupby_rank")},l=function(e){return t.any(i,function(t){return t.splitby_field===e})};return i&&t.any(i,function(e,t){return s(t)})&&(a=t(a).filter(function(e){return s(e)||l(e)})),{action:"fieldvalue",field:a,value:t(a).map(function(e){return n["row."+e]})}},o=function(e){var i,n;return"_time"===e.name?(i=t.compact([e.name2]),n=t.compact([e.value2])):e.name&&e.name2?(i=[e.name,e.name2],n=[e.value,e.value2]):e.name?(i=[e.name],n=[e.value]):(i=[e.name2],n=[e.value2]),{action:"fieldvalue",field:i,value:n}},h=function(e){return{action:"keyword",field:e.name2}},u=function(e){return{action:"addterm",value:e.name2}},d=function(e){var i,n,a,s={_geo_lat_field:"_geo_lat_field",_geo_lon_field:"_geo_long_field",_geo_bounds_south:"_geo_bounds_south",_geo_bounds_west:"_geo_bounds_west",_geo_bounds_north:"_geo_bounds_north",_geo_bounds_east:"_geo_bounds_east"};return t.all(s,function(t){return!!e.data[t]})?(a=t(s).chain().map(function(t,i){return[i,e.data[t]]}).object().value(),t.extend({action:"geoviz"},a)):(i=e.fields.slice(0,2),n=t(i).map(function(t){return e.data[t]}),{action:"fieldvalue",field:i,value:n})},c={};return c.applyDrilldownIntention=function(s,p,g,f,m){m||(m={});var v=m.newSearch?"*":p.search,b=c.shouldDrilldownInNewTab(s,m),y=new i;"_time"===s.name&&y.set({"dispatch.earliest_time":s.value},{silent:!0}),s._span&&y.set({"dispatch.latest_time":JSON.stringify(Math.round(1e3*(parseFloat(s.value)+s._span))/1e3)},{silent:!0});var L={negate:m.hasOwnProperty("negate")?m.negate:l(s),stripReportsSearch:!m.hasOwnProperty("stripReportsSearch")||m.stripReportsSearch};m.fields&&m.fields.length>0?t.extend(L,{action:"fieldvalue",field:m.fields,value:m.values}):"geoviz"===s.type?t.extend(L,d(s)):"column"===s.type?t.extend(L,h(s)):"row"===s.type?t.extend(L,r(s,g)):"addterm"===s.type?t.extend(L,u(s)):t.extend(L,o(s)),a.info("Applying drilldown intention",L);var w=e.Deferred();return y.fetch({data:t.extend({q:v,fieldMetaData:JSON.stringify(g),app:f.get("app"),owner:f.get("owner"),parse_only:!0},L)}).done(function(){w.resolve({q:n.stripLeadingSearchCommand(y.get("fullSearch")),earliest:y.get("dispatch.earliest_time")||p.earliest||0,latest:y.get("dispatch.latest_time")||p.latest||""},b)}).fail(function(){w.reject.apply(w,arguments)}),w.promise()},c.shouldDrilldownInNewTab=function(e,t){t=t||{};var i=e.hasOwnProperty("modifierKey")?e.modifierKey:s(e);return t.hasOwnProperty("drilldownNewTab")?t.drilldownNewTab:i},c._convertRowDrilldownToIntentions=r,c._convertCellDrilldownToIntentions=o,c._convertColumnDrilldownToIntentions=h,c._convertAddTermDrilldownToIntentions=u,c._convertGeovizDrilldownToIntentions=d,c}.apply(t,n),!(void 0!==a&&(e.exports=a))},"models/services/search/IntentionsParser":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("models/Base"),i("util/splunkd_utils"),i("shim/splunk.util")],a=function(e,t,i,n,a,s){var l=":!:";return n.extend({url:"search/intentionsparser",sync:function(i,r,o){if("read"!==i)throw new Error("Sync operation not supported: "+i);o=e.extend(!0,{},o),o.type="POST";var h=o.data;t.isArray(h.field)&&(h.field=h.field.join(l),h.value=h.value.join(l));var u=o.data&&o.data.action?r.url:"search/parser",d=a.prepareSyncOptions(o,u);return d.data&&d.data.q&&(d.data.q=s.addLeadingSearchCommand(d.data.q,!0)),n.prototype.sync.call(this,"read",r,d)},fullSearch:function(){var e=this.get("fullSearch");if(e)return s.stripLeadingSearchCommand(e);var t=this.get("reportsSearch")||"",i=s.stripLeadingSearchCommand(this.get("eventsSearch")||"");return t&&(t=" | "+t),i+t},isReportsSearch:function(){var e=this.get("reportsSearch");return!!e}})}.apply(t,n),!(void 0!==a&&(e.exports=a))},"js_charting/util/parsing_utils":function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/splunk.util"),i("js_charting/util/color_utils")],a=function(e,t,i){var n=function(i,n){return e(i).isUndefined()?!!n:t.normalizeBoolean(i)},a=function(t){if(!t)return!1;var i,n,a,s,h={};t=l(t);var u=t.length;if("{"!==t.charAt(0)||"}"!==t.charAt(u-1))return!1;if(/^\{\s*\}$/.test(t))return{};for(t=t.substr(1,u-2),n=r(t,","),i=0;i<n.length;i++)a=r(n[i],":"),s=l(a[0]),'"'===s[0]&&(s=s.substring(1)),'"'===e(s).last()&&(s=s.substring(0,s.length-1)),s=o(s,["{","}","[","]","(",")",",",":",'"']),h[s]=l(a[1]);return h},s=function(e){if(!e)return!1;e=l(e);var i=e.length;return"["===e.charAt(0)&&"]"===e.charAt(i-1)&&(/^\[\s*\]$/.test(e)?[]:(e=e.substr(1,i-2),t.stringToFieldList(e)))},l=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},r=function(t,i,n){n=n||"\\";var a=t.split(i),s=[a.shift()];return e(a).each(function(t){var a=e(s).last();e(a).last()===n?s[s.length-1]+=i+t:s.push(t)}),s},o=function(t,i){return e(i).each(function(e){var i=new RegExp("\\\\\\"+e,"g");t=t.replace(i,e)}),t},h=function(e){return t.escapeHtml(e)},u=function(e){return(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;")},d=function(t){return e.isNumber(t)?t:"#"===t.substring(0,1)?i.hexFromColor(t):parseInt(t,16)},c=function(e){var t,i,n;try{n=JSON.parse(e)}catch(t){n=s(e)}if(!n)return!1;for(t=0;t<n.length;t++){if(i=d(n[t]),isNaN(i))return!1;n[t]=i}return n},p=function(t){var i;try{i=JSON.parse(t)}catch(e){i=a(t)}if(!i)return!1;var n={};return e(i).each(function(e,t){n[t]=d(e)||0}),n},g=function(e,t){if(!(e instanceof Array&&t instanceof Array))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},f=function(t){var i={},n=L(t,/legend[.]/);return e(n).each(function(e,t){i[t.replace(/^legend[.]/,"")]=e}),i},m=function(e){var t,i,n={},a=L(e,/(axisX|primaryAxis|axisLabelsX|axisTitleX|gridLinesX)/);for(t in a)a.hasOwnProperty(t)&&(v(t,e)||(i=t.replace(/(axisX|primaryAxis)/,"axis"),i=i.replace(/axisLabelsX/,"axisLabels"),i=i.replace(/axisTitleX/,"axisTitle"),i=i.replace(/gridLinesX/,"gridLines"),n[i]=a[t]));return n},v=function(e,t){return!!/primaryAxis/.test(e)&&(/primaryAxisTitle/.test(e)?t[e.replace(/primaryAxisTitle/,"axisTitleX")]:t[e.replace(/primaryAxis/,"axisX")])},b=function(e,i){var n,a,s,l,r={};if(i=(e&&t.normalizeBoolean(e["layout.splitSeries"])?0:i)||0,0===i)s=L(e,/(axisY[^2]|secondaryAxis|axisLabelsY(?!2.*|\.majorLabelStyle\.rotation|\.majorLabelStyle\.overflowMode)|axisTitleY[^2]|gridLinesY[^2])/);else{if(1!==i)throw new Error("Axis index must be 0 or 1");s=L(e,/(axisY2(?!\.enabled)|axisLabelsY2(?!\.majorLabelStyle\.rotation|\.majorLabelStyle\.overflowMode)|axisTitleY2|gridLinesY2)/),l=t.normalizeBoolean(s["gridLinesY2.showMajorLines"]),s["axisY2.scale"]&&"inherit"!==s["axisY2.scale"]||(s["axisY2.scale"]=e?e["axisY.scale"]||"linear":"linear"),"boolean"!=typeof l&&(s["gridLinesY2.showMajorLines"]=0),s["axisLabelsY2.extendsAxisRange"]=!e||(e["axisLabelsY.extendsAxisRange"]||!0)}for(n in s)s.hasOwnProperty(n)&&(y(n,e)||(a=n.replace(/(axisY2|axisY|secondaryAxis)/,"axis"),a=a.replace(/axisLabelsY2|axisLabelsY/,"axisLabels"),a=a.replace(/axisTitleY2|axisTitleY/,"axisTitle"),a=a.replace(/gridLinesY2|gridLinesY/,"gridLines"),r[a]=s[n]));return r},y=function(e,t){return!!/secondaryAxis/.test(e)&&(/secondaryAxisTitle/.test(e)?t[e.replace(/secondaryAxisTitle/,"axisTitleY")]:t[e.replace(/secondaryAxis/,"axisY")])},L=function(e,t){if(!(t instanceof RegExp))return e;var i,n={};for(i in e)e.hasOwnProperty(i)&&t.test(i)&&(n[i]=e[i]);return n},w=function(t){var i,n=[-90,-45,0,45,90],a=0;return i=parseInt(t,10),e.indexOf(n,i)===-1?a:i};return{normalizeBoolean:n,stringToObject:a,stringToArray:s,trimWhitespace:l,escapeSafeSplit:r,unescapeChars:o,escapeHtml:h,escapeSVG:u,stringToHexArray:c,stringToHexObject:p,arraysAreEquivalent:g,getLegendProperties:f,getXAxisProperties:m,xAxisKeyIsTrumped:v,getYAxisProperties:b,yAxisKeyIsTrumped:y,filterPropsByRegex:L,getRotation:w}}.apply(t,n),!(void 0!==a&&(e.exports=a))},"js_charting/util/color_utils":function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("shim/splunk.util")],a=function(e,t,i){var n=function(e,i){if("number"!=typeof e&&(e=parseInt(e,16)),t(e).isNaN()||e<0||e>16777215)return null;var n=(16711680&e)>>16,a=(65280&e)>>8,s=255&e;return void 0===i?"rgb("+n+","+a+","+s+")":"rgba("+n+","+a+","+s+","+i+")"},a=function(e){var t=e.split(","),i=t[0].charAt(3);return"a"===i?(t[0]=t[0].replace("rgba","rgb"),t[t.length-1]=")",t=t.join(),t=t.replace(",)",")")):e},s=function(e){var t=i.normalizeColor(e);return t?parseInt(t.replace("#","0x"),16):0},l=function(e,t){var i="number"==typeof e?e:s(e);return n(i,t)},r=function(e){if("number"!=typeof e&&(e=parseInt(e,16)),isNaN(e)||e<0||e>16777215)return 0;var t=(16711680&e)>>16,i=(65280&e)>>8,n=255&e;return Math.round(.2126*t+.7152*i+.0722*n)},o=function(t){var i=e.trim(t.attr("fill")),n=function(e){var t=parseFloat(e);return t>=0&&t<=1?t:1};if(!/^rgba/.test(i))return n(t.attr("fill-opacity"));var a=i.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)$/);return a&&a.length>4?n(a[4]):1};return{colorFromHex:n,stripOutAlpha:a,hexFromColor:s,addAlphaToColor:l,getLuminance:r,getComputedOpacity:o}}.apply(t,n),!(void 0!==a&&(e.exports=a))},"util/moment/relative":function(e,t,i){var n,a;n=[i("util/moment"),i("require/underscore")],a=function(e,t){function i(e,t){for(;t.length;){var i=t.match(/([+-]?\d+)([a-z]\w*)/);e.push(n(t)),t=t.substring(i[0].length)}}function n(e){if("now"==e)return{now:!0};var t=e.match(/([+-]?\d+)([a-z]\w*)/);if(t){var i=t[1],n=t[2],a=h()[n];if(!a)throw new Error("Invalid unit "+JSON.stringify(n)+" in relative time expression");return{amount:parseInt(i,10),unit:a}}throw new Error("Invalid relative time expression: "+JSON.stringify(e))}function a(e,t){if(t||(t={}),null!=e){if(e=String(e).trim(),/^-?\d+$/.test(e)){var a=parseInt(e,10);if(t.treatPlainNumberAs)return[{amount:a,unit:h()[t.treatPlainNumberAs]}];if(t.allowAbsoluteValue!==!1)return[{absolute:parseInt(e,10)}];throw new Error("Absolute time value "+JSON.stringify(e)+"is not allowed in relative time expression")}var s=[],l=e.split("@",2);if(""!==l[0]&&s.push(n(l[0])),l.length>1){var r=l[1].match(/^[a-z]\w*/);if(!r)throw new Error("Invalid snap-to expression: "+JSON.stringify(l[1]));r=r[0];var o=l[1].substring(r.length),u=r.match(/w([0-6])/);if(u)s.push({snapTo:"week"},{amount:parseInt(u[1],10),unit:"day"});else{var d=h()[r];if(!d)throw new Error("Invalid snap-to unit "+JSON.stringify(d)+" in relative time expression");s.push({snapTo:d})}o.length&&i(s,o)}return s}}function s(t,i){if(null!=i.absolute)return e.unix(i.absolute);if(i.now===!0)return e();if(null!=i.amount)return e(t).add(i.amount,i.unit);if(i.snapTo)return e(t).startOf(i.snapTo);throw new Error("Invalid parsed time expression part: "+JSON.stringify(i))}function l(e,i){return t.inject(i,s,e)}function r(e,t){try{var i=a(e,t);return i.length>0}catch(e){return!1}}var o={second:"s,sec,secs,second,seconds",minute:"m,min,minute,minutes",hour:"h,hr,hrs,hour,hours",day:"d,day,days",week:"w,week,weeks",month:"mon,month,months",quarter:"q,qtr,qtrs,quarter,quarters",year:"y,yr,yrs,year,years"},h=t.once(function(){var e={};return t(o).each(function(i,n){t(i.split(",")).each(function(t){e[t]=n})}),e});return e.fn.applyRelative=function(e,t){return l(this,a(e,t))},{parseRelativeTimeExpression:a,applyRelativeTimeExpression:l,applyRelativeTimeExpressionPart:s,isRelativeTimeExpression:r}}.apply(t,n),!(void 0!==a&&(e.exports=a))}});